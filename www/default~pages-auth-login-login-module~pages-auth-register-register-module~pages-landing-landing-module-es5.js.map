{"version":3,"sources":["./src/app/pages/auth/login/login.page.html","./src/app/pages/auth/register/register.page.html","./src/app/pages/auth/login/login.page.scss","./src/app/pages/auth/login/login.page.ts","./src/app/pages/auth/register/register.page.scss","./src/app/pages/auth/register/register.page.ts"],"names":[],"mappings":"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","file":"default~pages-auth-login-login-module~pages-auth-register-register-module~pages-landing-landing-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-button color=\\\"tertiary\\\" (click)=\\\"dismissLogin()\\\">Close</ion-button>\\r\\n    <ion-title style=\\\"text-align: center\\\">Login</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content color=\\\"light\\\">\\r\\n  \\r\\n  <div style=\\\"box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); margin-left: auto; margin-right: auto; margin-top: 5%; display: block; padding: 5%; width: 90%; height: 700; background-color: #ffffff; border-style: solid; border-width: 0.5%; border-color: #d9d8d8; border-radius: 3%\\\">\\r\\n      <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"login(form)\\\" method=\\\"post\\\">\\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">Email <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n            <ion-input ngModel type=\\\"email\\\" name=\\\"email\\\"></ion-input>\\r\\n          </ion-item>\\r\\n      \\r\\n          <ion-item>\\r\\n            <ion-label position=\\\"floating\\\">Password <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n            <ion-input ngModel type=\\\"password\\\" name=\\\"password\\\"></ion-input>\\r\\n          </ion-item>\\r\\n      \\r\\n          <!--<p text-right (click)=\\\"dismissLogin()\\\" routerLink=\\\"/forgot-password\\\">Forgot Password?</p>-->\\r\\n      \\r\\n          <ion-button type=\\\"submit\\\" expand=\\\"full\\\" color=\\\"primary\\\">Login</ion-button>\\r\\n        </form>\\r\\n        <p text-center>¿No tienes cuenta aún?</p>\\r\\n        <ion-button expand=\\\"full\\\" color=\\\"danger\\\" (click)=\\\"registerModal()\\\">Registro</ion-button>\\r\\n  </div>\\r\\n</ion-content>\"","module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"primary\\\">\\r\\n    <ion-button color=\\\"tertiary\\\" (click)=\\\"dismissRegister()\\\">Cerrar</ion-button>\\r\\n    <ion-title style=\\\"text-align: center\\\">Registro</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content padding color=\\\"light\\\">\\r\\n  <div style=\\\"box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); margin-left: auto; margin-right: auto; margin-top: 5%; display: block; padding: 5%; width: 90%; height: 700; background-color: #ffffff; border-style: solid; border-width: 0.5%; border-color: #d9d8d8; border-radius: 1%\\\">\\r\\n    <form #form=\\\"ngForm\\\" (ngSubmit)=\\\"register(form)\\\" method=\\\"post\\\">\\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Número de Cédula <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"number\\\" ngModel name=\\\"cedula\\\"></ion-input>\\r\\n        </ion-item>\\r\\n        \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Nombre <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"text\\\" ngModel name=\\\"nombre\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Apellido <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"text\\\" ngModel name=\\\"apellido\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Número de teléfono <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"number\\\" ngModel name=\\\"telefono\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Email <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"email\\\" type=\\\"email\\\" ngModel name=\\\"email\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Contraseña <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"password\\\" ngModel name=\\\"password\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Repetir Contraseña <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-input type=\\\"password\\\" ngModel name=\\\"password2\\\"></ion-input>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-item>\\r\\n          <ion-label position=\\\"floating\\\">Dirección <ion-text color=\\\"danger\\\">*</ion-text></ion-label>\\r\\n          <ion-textarea type=\\\"text\\\" ngModel name=\\\"direccion\\\"></ion-textarea>\\r\\n        </ion-item>\\r\\n    \\r\\n        <ion-button type=\\\"submit\\\" style=\\\"margin-top: 5%\\\" expand=\\\"full\\\" color=\\\"danger\\\">Registrar</ion-button>\\r\\n      </form>\\r\\n      <p text-center>¿Ya posees una cuenta?</p>\\r\\n      <ion-button expand=\\\"full\\\" color=\\\"tertiary\\\" (click)=\\\"loginModal()\\\">Login</ion-button>\\r\\n  </div>\\r\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvbG9naW4vbG9naW4ucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { RegisterPage } from '../register/register.page';\r\nimport { NgForm } from '@angular/forms';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { AlertService } from 'src/app/services/alert.service';\r\nimport { Storage } from '@ionic/storage';\r\n\r\n@Component({\r\n  selector: 'app-login',\r\n  templateUrl: './login.page.html',\r\n  styleUrls: ['./login.page.scss'],\r\n})\r\nexport class LoginPage implements OnInit {\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private authService: AuthService,\r\n    private navCtrl: NavController,\r\n    private alertService: AlertService,\r\n    public storage: Storage\r\n  ) { }\r\n  ngOnInit() {\r\n  }\r\n  // Dismiss Login Modal\r\n  dismissLogin() {\r\n    try {\r\n      this.modalController.dismiss();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    \r\n  }\r\n  // On Register button tap, dismiss login modal and open register modal\r\n  async registerModal() {\r\n    try {\r\n      this.dismissLogin();\r\n      const registerModal = await this.modalController.create({\r\n        component: RegisterPage\r\n      });\r\n      return await registerModal.present();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n  login(form: NgForm) {\r\n    try {\r\n      if(form.value.email == \"\" || form.value.password == \"\") {\r\n        this.alertService.presentToast(\"Existen campos vacíos\");\r\n      } else if (form.value.email.match(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$/) == null) {\r\n        this.alertService.presentToast(\"Ingrese de forma correcta su correo\");\r\n      } else if (form.value.password.length < 8) {\r\n        this.alertService.presentToast(\"La clave debe contener un mínimo de 8 caracteres\");\r\n      } else {\r\n        this.authService.login(form.value.email, form.value.password).subscribe(\r\n          data => {\r\n            if(data['respuesta'] == \"true\"){\r\n              this.authService.emailLogged = form.value.email;\r\n              console.log(this.authService.emailLogged);\r\n              this.authService.ticketLogged = data['ticket'];\r\n              console.log(this.authService.ticketLogged);\r\n              this.alertService.presentToast(\"Logged In\");\r\n              this.dismissLogin();\r\n              this.storage.set('ticket', data['ticket']);\r\n              this.storage.set('email', form.value.email);\r\n              this.storage.set('password', form.value.password);\r\n              this.navCtrl.navigateRoot('/dashboard');\r\n              console.log('Aqui')\r\n            } else if(data['respuesta'] == \"false\") {\r\n              this.alertService.presentToast(\"User doesn´t exit or Wrong Password\");\r\n            }\r\n          },\r\n          error => {\r\n            console.log(error);\r\n          }/*,\r\n          () => {\r\n            this.dismissLogin();\r\n            this.navCtrl.navigateRoot('/dashboard');\r\n          }*/\r\n        );\r\n      }\r\n    } catch (error) {\r\n      this.alertService.presentToast(\"Ocurrió un error Iniciando sesión, por favor intente más tarde\");\r\n    }\r\n  }\r\n\r\n    /*if(form.value.email == \"\" || form.value.password == \"\") {\r\n      this.alertService.presentToast(\"Some Inputs are in blank\");\r\n    } else {\r\n      this.authService.login(form.value.email, form.value.password);\r\n      if(this.authService.registerAnswer == true){\r\n        this.alertService.presentToast(\"User is Logged Succesfully\");\r\n        this.dismissLogin();\r\n        this.navCtrl.navigateRoot('/dashboard');\r\n      } else if(this.authService.registerAnswer == false) {\r\n        this.alertService.presentToast(\"You're not Registered or You're Password is wrong\");\r\n      }\r\n    }\r\n  }*/\r\n\r\n    /*this.authService.login(form.value.email, form.value.password).subscribe(\r\n      data => {\r\n        this.alertService.presentToast(\"Logged In\");\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n        this.dismissLogin();\r\n        this.navCtrl.navigateRoot('/dashboard');\r\n      }\r\n    );\r\n  }*/\r\n}\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2F1dGgvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ModalController, NavController } from '@ionic/angular';\r\nimport { LoginPage } from '../login/login.page';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { NgForm } from '@angular/forms';\r\nimport { AlertService } from 'src/app/services/alert.service';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    public authService: AuthService,\r\n    private navCtrl: NavController,\r\n    private alertService: AlertService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  // Dismiss Register Modal\r\n  dismissRegister() {\r\n    try {\r\n      this.modalController.dismiss();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  // On Login button tap, dismiss Register modal and open login Modal\r\n  async loginModal() {\r\n    try {\r\n      this.dismissRegister();\r\n      const loginModal = await this.modalController.create({\r\n        component: LoginPage,\r\n      });\r\n      return await loginModal.present();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n\r\n  register(form: NgForm) {\r\n    try {\r\n      if(form.value.cedula == \"\" || form.value.nombre == \"\" || form.value.apellido == \"\" || form.value.telefono == \"\" ||\r\n      form.value.email == \"\" || form.value.password == \"\" || form.value.direccion == \"\" || form.value.password2 == \"\") {\r\n        this.alertService.presentToast(\"Existen campos vacíos, por favor rellenarlos\");\r\n      } else if (form.value.password != form.value.password2) {\r\n        this.alertService.presentToast(\"La contraseña y su confirmación no coinciden\");\r\n      } else if (form.value.email.match(/[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$/) == null) {\r\n        this.alertService.presentToast(\"Ingrese de forma correcta su correo\");\r\n      } else if (form.value.password.length < 8) {\r\n        this.alertService.presentToast(\"La clave debe contener un mínimo de 8 caracteres\");\r\n      } else {\r\n        this.authService.register(form.value.cedula, form.value.nombre, form.value.apellido, form.value.telefono,\r\n          form.value.email, form.value.password, form.value.direccion).subscribe(\r\n          data => {\r\n            console.log(data[\"respuesta\"]);\r\n            if(data[\"respuesta\"] == \"true\"){\r\n              this.dismissRegister();\r\n              this.navCtrl.navigateRoot('/landing');\r\n              /*this.authService.login(form.value.email, form.value.password).subscribe(\r\n                data => {\r\n                  if(data['respuesta'] == \"true\"){\r\n                    this.authService.emailLogged = form.value.email;\r\n                    this.alertService.presentToast(\"Logged In\");\r\n                    this.dismissRegister();\r\n                    this.navCtrl.navigateRoot('/dashboard');\r\n                  } else if(data['respuesta'] == \"false\") {\r\n                    this.alertService.presentToast(\"User doesn´t exit or Wrong Password\");\r\n                  }\r\n      \r\n                },\r\n                error => {\r\n                  console.log(error);\r\n                },\r\n                () => {\r\n                  this.dismissRegister();\r\n                  this.navCtrl.navigateRoot('/dashboard');\r\n                }\r\n              );\r\n              this.alertService.presentToast('User is Registered Succesfully');*/\r\n            }\r\n            else if(data[\"respuesta\"] == \"false\"){\r\n              this.alertService.presentToast('The User Already exist');\r\n            }\r\n        },\r\n          error => {\r\n            console.log(error);\r\n          },\r\n          () => {\r\n\r\n          }\r\n        );\r\n      }\r\n    } catch (error) {\r\n      this.alertService.presentToast(\"Ocurrió un error en el Registro, por favor intente más tarde\");\r\n    }\r\n\r\n    \r\n        /*this.authService.login(form.value.email, form.value.password).subscribe(\r\n          data => {\r\n            console.log(data['resp']);\r\n            if(data == \"true\") {\r\n              console.log(\"Habla mamaguevo\");\r\n            } else if(data == \"false\") {\r\n              console.log(\"Cabeza de pija\");\r\n            }\r\n\r\n          },\r\n          error => {\r\n            console.log(error);\r\n          },\r\n          () => {\r\n            this.dismissRegister();\r\n            this.navCtrl.navigateRoot('/dashboard');\r\n          }\r\n        );*/\r\n        \r\n\r\n    /*if(form.value.cedula == \"\" || form.value.nombre == \"\" || form.value.apellido == \"\" || form.value.telefono == \"\" ||\r\n      form.value.email == \"\" || form.value.password == \"\" || form.value.direccion == \"\") {\r\n        this.alertService.presentToast(\"Some Inputs are in blank\");\r\n    } else {\r\n      this.authService.register(form.value.cedula, form.value.nombre, form.value.apellido, form.value.telefono,\r\n        form.value.email, form.value.password, form.value.direccion);\r\n        console.log(JSON.stringify(this.authService.registerAnswer));\r\n      if(JSON.stringify(this.authService.registerAnswer) == \"true\"){\r\n        this.alertService.presentToast(\"User is Registered Succesfully\");\r\n        this.dismissRegister();\r\n        this.navCtrl.navigateRoot('/dashboard');\r\n      } else if(JSON.stringify(this.authService.registerAnswer) == \"false\") {\r\n        this.alertService.presentToast(\"The User is Already Registered\");\r\n      }\r\n    }*/\r\n\r\n    /*this.authService.register(form.value.cedula, form.value.nombre, form.value.apellido, form.value.telefono,\r\n      form.value.email, form.value.password, form.value.direccion);\r\n    if(this.authService.registerAnswer == true){\r\n      this.alertService.presentToast(\"User is Registered Succesfully\");\r\n      this.dismissRegister();\r\n      this.navCtrl.navigateRoot('/dashboard');\r\n    } else if(this.authService.registerAnswer == false) {\r\n      this.alertService.presentToast(\"The User is Already Registered\");\r\n    }*/\r\n    \r\n    /*this.authService.register(form.value.cedula, form.value.nombre, form.value.apellido, form.value.telefono,\r\n      form.value.email, form.value.password, form.value.direccion).subscribe(\r\n      data => {\r\n        this.authService.login(form.value.email, form.value.password).subscribe(\r\n          data => {\r\n            console.log(data['resp']);\r\n            if(data == \"true\") {\r\n              console.log(\"Habla mamaguevo\");\r\n            } else if(data == \"false\") {\r\n              console.log(\"Cabeza de pija\");\r\n            }\r\n\r\n          },\r\n          error => {\r\n            console.log(error);\r\n          },\r\n          () => {\r\n            this.dismissRegister();\r\n            this.navCtrl.navigateRoot('/dashboard');\r\n          }\r\n        );\r\n        this.alertService.presentToast(data['message']);\r\n      },\r\n      error => {\r\n        console.log(error);\r\n      },\r\n      () => {\r\n\r\n      }\r\n    );*/\r\n  }\r\n  \r\n}\r\n"],"sourceRoot":""}